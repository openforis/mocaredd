[{"path":"https://openforis.github.io/mocaredd/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2024 mocaredd authors, Open Foris Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://openforis.github.io/mocaredd/articles/app-features.html","id":"step-by-step-app-workflow","dir":"Articles","previous_headings":"","what":"Step-by-Step app workflow","title":"Application workflow and features development","text":"app provides template spreadsheet download, either directly app resources . user fills spreadsheet’s 4 tabs: User inputs (user_inputs). Helps offering great flexibility minimum number parameters. Time periods (time_periods). Describes times periods covered data combined reference reporting. Land use transitions (AD_lu_transitions). Describes probability density functions (PDFs) land use change areas time period Carbon stocks (c_stocks). Contains probability density functions carbon elements necessary associate emission removal factors land use changes time periods. user upload filled template tool. app run checks: verifies connections time periods, land use changes carbon elements correctly entered, provides overview data (number time periods, carbon pools, method forest degradation, etc.), calculates arithmetic mean aggregated emission reductions (simulation yet). makes land use change matrices ha. checks passed, app runs simulations: PDF, determined number simulations randomly generated, carbon accounting chain calculations created based data uploaded, simulations aggregated emissions per land use change, emissions removals per REDD+ activity time period, emissions reduction increased removals monitoring period data. improved estimates confidence intervals reported median quantiles simulations stage aggregation. sensitivity analysis run provide respective contributions REDD+ activities, activity data emission factors, time periods overall uncertainty.","code":""},{"path":"https://openforis.github.io/mocaredd/articles/app-features.html","id":"planned-features","dir":"Articles","previous_headings":"","what":"Planned features","title":"Application workflow and features development","text":"Improve template guidelines examples real cases. Improve sensitivity analysis. Develop template tab calculations annual processes (removals, soil organic carbon). Develop template calculations bootstrap raw data. Add truncated PDFs support. Add IPCC tier 1 uncertainties propagation around arithmetic means.","code":""},{"path":"https://openforis.github.io/mocaredd/articles/tuto-template.html","id":"context","dir":"Articles","previous_headings":"","what":"Context","title":"Guideline for building {mocaredd} workbook","text":"context greenhouse gas emission reductions forestry sector REDD+, many countries jurisdictions’ approach uncertainty around estimates focused large spreadsheet tables near-impossible navigate anyone developers, reducing transparency effectiveness verification. Simplifying simulation-based uncertainty analysis REDD+ greenhouse gas emission reductions may possible desirable. -simplification result uncontrolled bias misrepresent actual uncertainty around volumes emission reductions. {mocaredd} tool aims solving two critical issues -complicated spreadsheets-based calculations: Split information several tables keys merge data calculations. Inspired database management systems efficiency simplification data structure. Process simulations statistical language rather spreadsheet tool, efficiency purpose. authors also believe carbon accounting calculation chain well understood parties, adding simulations doesn’t need visually highlighted, safer run programmatically spreadsheets. , {mocaredd} built R package provides calculation functions XLSX workbook contain initial data structured easy navigate way. guideline provides instructions fill template workbook ensure matrices land use change reported, associated carbon elements, reported time periods.","code":""},{"path":"https://openforis.github.io/mocaredd/articles/tuto-template.html","id":"overview-of-the-template","dir":"Articles","previous_headings":"","what":"Overview of the template","title":"Guideline for building {mocaredd} workbook","text":"template built around four tables encompass information necessary : re-construct arithmetic means (based simulations) emissions removals emission reductions (ERs). run simulations input variables areas carbon elements, Get simulation-based emission reductions associated uncertainties. Run sensitivity analysis highlight main contributors ERs uncertainty. four tables designed describe separately: User inputs bring flexibility calculation algorithm. example land use change expressed hectares per year hectares, carbon stock expressed tons dry matter tons carbon. Time periods different datasets used calculations REDD+ period belong , reference monitoring. Areas land use change, time period combination land use, area ’s standard error. Carbon elements, combining carbon pools carbon related elements carbon fraction, degradation ratios expressed percentage intact land use. Detailed information table presented following sections.","code":""},{"path":"https://openforis.github.io/mocaredd/articles/tuto-template.html","id":"user-inputs","dir":"Articles","previous_headings":"","what":"User inputs","title":"Guideline for building {mocaredd} workbook","text":"table contains parameters allow tool handle many configurations possible. users specify number simulation iterations, random seed reproduce numbers options regarding degradation, units rounding digits.","code":""},{"path":"https://openforis.github.io/mocaredd/articles/tuto-template.html","id":"time-periods","dir":"Articles","previous_headings":"","what":"Time periods","title":"Guideline for building {mocaredd} workbook","text":"table used specify time periods different datasets used activity data emission factors. reference monitoring periods can build several time periods. example: T1: 2006-2008, Reference Period, T2: 2009-2010, Reference Period, T3: 2011, Monitoring Period 1 T4: 2012, Monitoring Period 2 T5: 2013, Monitoring Period 2. case, reference period’s baseline emission level constructed 2 time periods T1 T2, 2 monitoring periods, one build T3 one year, one build T4 adn T5 two years. allow script adjust different scenario, template requires time period ID, start end years reference monitoring code (REF unique, MON can subdivided MON1, MON2, etc.). NOTE: case time period doesn’t start beginning calendar year, adjust year match duration. example time period 1 year 1st June 2005 31 May 2006 start end year 2005 considered one year period tool.","code":""},{"path":[]},{"path":[]},{"path":"https://openforis.github.io/mocaredd/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Gael Sola. Author, maintainer. Javier Garcia Perez. Author. Jimena Saucedo Miranda. Contributor. Lauri Vesa. Contributor.","code":""},{"path":"https://openforis.github.io/mocaredd/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Sola G, Garcia Perez J (2025). mocaredd: Monte Carlo Simulation REDD+ uncertainty analysis. R package version 0.3.0, https://github.com/openforis/mocaredd.","code":"@Manual{,   title = {mocaredd: Monte Carlo Simulation for REDD+ uncertainty analysis},   author = {Gael Sola and Javier {Garcia Perez}},   year = {2025},   note = {R package version 0.3.0},   url = {https://github.com/openforis/mocaredd}, }"},{"path":[]},{"path":"https://openforis.github.io/mocaredd/index.html","id":"monte-carlo-simulations-for-redd-uncertainty-analysis-mocaredd-is-a-free-and-opensource-application-that-aims-at-making-simulation-based-uncertainty-calculations-for-redd-easier-to-process-report-and-verify","dir":"","previous_headings":"","what":"Monte Carlo Simulations for REDD+ uncertainty analysis (mocaredd) is a free and opensource application that aims at making simulation-based uncertainty calculations for REDD+ easier to process, report and verify.","title":"Monte Carlo Simulation for REDD+ uncertainty analysis","text":"works combining strengths spreadsheet tools (XLSX) templating statistical language (R) running simulations, aggregating results producing helpful visuals.","code":""},{"path":"https://openforis.github.io/mocaredd/index.html","id":"what-for","dir":"","previous_headings":"","what":"What for?","title":"Monte Carlo Simulation for REDD+ uncertainty analysis","text":"context REDD+ mechanism (Reducing emission Deforestation forest Degradation “plus”), countries can receive result-based payments emission reductions removal increases greenhouse gas (GHG) forestry sector. Emission reductions estimated quantifying amount greenhouse gas emissions reference level (.e baseline) monitorig period. estimates come level uncertainty due sampling methods models used generate estimations. High integrity REDD+ standards, set rules quantification emissions removals, uncertainties, increasingly require use Monte Carlo simulations REDD+ uncertainties. simulations often run spreadsheet tools, lack structure inherent disadvantage spreadsheets task (error prone, difficulty handle large amount data) becoming barrier quality, reproducibility verification uncertainties based simulations. {mocaredd} provides template organizing data, tool takes data, runs Monte Carlo Simulations produces improved estimates confidence intervals around greenhouse gas emissions emission reductions forestry sector (REDD+).","code":""},{"path":[]},{"path":"https://openforis.github.io/mocaredd/index.html","id":"online-app","dir":"","previous_headings":"How to run the application ?","what":"Online app","title":"Monte Carlo Simulation for REDD+ uncertainty analysis","text":"application available online (read--use) : https://openforis-shiny.shinyapps.io/mocaredd/","code":""},{"path":"https://openforis.github.io/mocaredd/index.html","id":"offline--local-installation","dir":"","previous_headings":"How to run the application ?","what":"offline / local installation","title":"Monte Carlo Simulation for REDD+ uncertainty analysis","text":"can also installed offline use (require installing R Rstudio, may require administrator permission). app require R version 3.4 minimum. RStudio recommended Integrated Development Environment. Windows machines, Rtools also installed: https://cloud.r-project.org/ https://posit.co/download/rstudio-desktop/ https://cran.r-project.org/bin/windows/Rtools/ R Rstudio installed, open R studio run folloing code terminal:","code":"if (!require(remotes)) install.packages(\"remotes\") if (!require(mocaredd)) remotes::install_github(\"openforis/mocaredd@v1.0\")  mocaredd::shiny_run_mocaredd()"},{"path":"https://openforis.github.io/mocaredd/index.html","id":"resources","dir":"","previous_headings":"","what":"Resources","title":"Monte Carlo Simulation for REDD+ uncertainty analysis","text":"Online app: https://openforis-shiny.shinyapps.io/mocaredd/ Online documentation: https://openforis.github.io/mocaredd/ Template guidelines: https://openforis.github.io/mocaredd/articles/tuto-template.html Simple template (2 time periods, 12 land use changes classes, 2 carbon pools, inc. simulations Excel comparison): Example2--sims.xlsx Intermediate template (4 time periods, 48 land use change classes, 4 carbon pools): Example1-4pools.xlsx Github repository: https://github.com/openforis/mocaredd Contact form: Contact us","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_arithmetic_mean.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate emissions based on arithmetic means — fct_arithmetic_mean","title":"Calculate emissions based on arithmetic means — fct_arithmetic_mean","text":"TBD","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_arithmetic_mean.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate emissions based on arithmetic means — fct_arithmetic_mean","text":"","code":"fct_arithmetic_mean(.ad, .cs, .usr, .time)"},{"path":"https://openforis.github.io/mocaredd/reference/fct_arithmetic_mean.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate emissions based on arithmetic means — fct_arithmetic_mean","text":".ad Activity Data input table shiny app (AD_lu_transitions) .cs Carbon Stock input table shiny app (c_stocks) .usr User inputs' table shiny app (user_inputs). Contains number iterations MCS, carbon fraction needed truncated PDFs used necessary. .time 'time' table tool input file (see template)","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_arithmetic_mean.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate emissions based on arithmetic means — fct_arithmetic_mean","text":"data frame arithmetic mean CO2 emissions land use transition, REDD+ activity emission reductions level.","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_arithmetic_mean.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate emissions based on arithmetic means — fct_arithmetic_mean","text":"","code":"library(readxl) library(dplyr) #>  #> Attaching package: ‘dplyr’ #> The following objects are masked from ‘package:stats’: #>  #>     filter, lag #> The following objects are masked from ‘package:base’: #>  #>     intersect, setdiff, setequal, union library(mocaredd)  path <- system.file(\"extdata/example2-with-sims.xlsx\", package = \"mocaredd\") path <- system.file(\"extdata/example1-4pools.xlsx\", package = \"mocaredd\")  cs <- read_xlsx(path = path, sheet = \"c_stocks\", na = \"NA\") ad <- read_xlsx(path = path, sheet = \"AD_lu_transitions\", na = \"NA\") usr <- read_xlsx(path = path, sheet = \"user_inputs\", na = \"NA\") time <- read_xlsx(path = path, sheet = \"time_periods\", na = \"NA\")  time_clean <- time |> dplyr::mutate(nb_years = year_end - year_start + 1)  res <- fct_arithmetic_mean(.ad = ad, .cs = cs, .usr = usr, .time = time_clean) head(res$emissions) #> # A tibble: 3 × 6 #>   period_type year_start year_end nb_years sim_no       E #>   <chr>            <dbl>    <dbl>    <dbl>  <int>   <dbl> #> 1 REF               2005     2014       10      1 4934807 #> 2 MON1              2019     2019        1      1 2397134 #> 3 MON2              2020     2021        2      1 2892373 res$gg_emissions"},{"path":"https://openforis.github.io/mocaredd/reference/fct_calc_res.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate median and confidence interval based on Monte Carlo Simulations — fct_calc_res","title":"Calculate median and confidence interval based on Monte Carlo Simulations — fct_calc_res","text":"Monte Carlo simulations package functions generate table one row = one simulation. fct_calc_res() takes simulation table output simulated variable's median confidence interval selected category (land use transition, REDD+ activity time period).","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_calc_res.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate median and confidence interval based on Monte Carlo Simulations — fct_calc_res","text":"","code":"fct_calc_res(.data, .id, .sim, .ci_alpha)"},{"path":"https://openforis.github.io/mocaredd/reference/fct_calc_res.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate median and confidence interval based on Monte Carlo Simulations — fct_calc_res","text":".data data frame containing simulation aggregated results .id name ID column data frame .sim name column containing simulated  values .ci_alpha alpha value confidence interval confidence level = 1 - alpha.","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_calc_res.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate median and confidence interval based on Monte Carlo Simulations — fct_calc_res","text":"tibble simulation results per category ID column: estimated mean, percentage uncertainty, margin error, lower upper bound confidence interval.","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_calc_res.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate median and confidence interval based on Monte Carlo Simulations — fct_calc_res","text":"","code":"## TBD"},{"path":"https://openforis.github.io/mocaredd/reference/fct_check_data2.html","id":null,"dir":"Reference","previous_headings":"","what":"Check that the app's input data meet the template criteria. — fct_check_data2","title":"Check that the app's input data meet the template criteria. — fct_check_data2","text":"Tests 6 types conformity app template avoid code break analysis: (1) column names, (2) tables' size, (3) data types, (4) categories names, (5) unique IDs (6) matching key variables tables.","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_check_data2.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check that the app's input data meet the template criteria. — fct_check_data2","text":"","code":"fct_check_data2(.usr, .time, .ad, .cs)"},{"path":"https://openforis.github.io/mocaredd/reference/fct_check_data2.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check that the app's input data meet the template criteria. — fct_check_data2","text":".usr User inputs' table shiny app (user_inputs) .time 'time' table tool input file (see template) .ad Activity Data input table shiny app (AD_lu_transitions) .cs Carbon Stock input table shiny app (c_stocks)","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_check_data2.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check that the app's input data meet the template criteria. — fct_check_data2","text":"dataframe TRUE FALSE (TRUE check passes), broad error locations FALSE.","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_check_data2.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check that the app's input data meet the template criteria. — fct_check_data2","text":"","code":"library(mocaredd) library(readxl)  path <- system.file(\"extdata/example1-4pools.xlsx\", package = \"mocaredd\")  cs <- read_xlsx(path = path, sheet = \"c_stocks\", na = \"NA\") ad <- read_xlsx(path = path, sheet = \"AD_lu_transitions\", na = \"NA\") usr <- read_xlsx(path = path, sheet = \"user_inputs\", na = \"NA\") time <- read_xlsx(path = path, sheet = \"time_periods\", na = \"NA\")  fct_check_data2(.ad = ad, .cs = cs, .usr = usr, .time = time) #> $cols_ok #> [1] TRUE #>  #> $size_ok #> [1] TRUE #>  #> $datatypes_ok #> [1] TRUE #>  #> $cats_ok #> [1] TRUE #>  #> $ids_ok #> [1] TRUE #>  #> $matches_ok #> [1] TRUE #>  #> $all_ok #> [1] TRUE #>  #> $pbs #> named list() #>"},{"path":"https://openforis.github.io/mocaredd/reference/fct_combine_mcs_E.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate and propagate Monte Carlo Simulations based on a template input file. — fct_combine_mcs_E","title":"Generate and propagate Monte Carlo Simulations based on a template input file. — fct_combine_mcs_E","text":"TBD","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_combine_mcs_E.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate and propagate Monte Carlo Simulations based on a template input file. — fct_combine_mcs_E","text":"","code":"fct_combine_mcs_E(.ad, .cs, .usr)"},{"path":"https://openforis.github.io/mocaredd/reference/fct_combine_mcs_E.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate and propagate Monte Carlo Simulations based on a template input file. — fct_combine_mcs_E","text":".ad Activity Data input table shiny app (AD_lu_transitions) .cs Carbon Stock input table shiny app (c_stocks) .usr User inputs' table shiny app (user_inputs). Contains number iterations MCS, carbon fraction needed truncated PDFs used necessary.","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_combine_mcs_E.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate and propagate Monte Carlo Simulations based on a template input file. — fct_combine_mcs_E","text":"data frame Monte Carlo simulations CO2 emissions land use transition, REDD+ activity emission reductions level.","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_combine_mcs_E.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate and propagate Monte Carlo Simulations based on a template input file. — fct_combine_mcs_E","text":"","code":"library(mocaredd) library(readxl) library(dplyr)  path <- system.file(\"extdata/example2-with-sims.xlsx\", package = \"mocaredd\")  cs <- read_xlsx(path = path, sheet = \"c_stocks\", na = \"NA\") ad <- read_xlsx(path = path, sheet = \"AD_lu_transitions\", na = \"NA\") usr <- read_xlsx(path = path, sheet = \"user_inputs\", na = \"NA\")  cs_clean <- cs |> filter(!is.na(c_value) | !is.na(c_pdf_a))  res <- fct_combine_mcs_E(.ad = ad, .cs = cs_clean, .usr = usr)  get_trans <- sample(res$trans_id, 1) res_sub <- res |> filter(trans_id == get_trans)  hist(res_sub$E)"},{"path":"https://openforis.github.io/mocaredd/reference/fct_combine_mcs_ER.html","id":null,"dir":"Reference","previous_headings":"","what":"Combine MCS of emissions from Reference and monitoring period into emission reductions — fct_combine_mcs_ER","title":"Combine MCS of emissions from Reference and monitoring period into emission reductions — fct_combine_mcs_ER","text":"Depending period defined data annualized , calculate Emission Level reference monitoring period simulation.","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_combine_mcs_ER.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Combine MCS of emissions from Reference and monitoring period into emission reductions — fct_combine_mcs_ER","text":"","code":"fct_combine_mcs_ER(.sim_ref, .sim_mon, .ad_annual)"},{"path":"https://openforis.github.io/mocaredd/reference/fct_combine_mcs_ER.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Combine MCS of emissions from Reference and monitoring period into emission reductions — fct_combine_mcs_ER","text":".sim_ref simulation aggregated reference period, output fct_combine_mcs_P() .sim_mon simulation aggregated monitoring period(s), output fct_combine_mcs_P() .ad_annual TRUE FALSE, activity data annualized .","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_combine_mcs_ER.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Combine MCS of emissions from Reference and monitoring period into emission reductions — fct_combine_mcs_ER","text":"tibble simulations final estimate per type period.","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_combine_mcs_ER.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Combine MCS of emissions from Reference and monitoring period into emission reductions — fct_combine_mcs_ER","text":"","code":"library(mocaredd) library(readxl) library(dplyr)  path <- system.file(\"extdata/example1-4pools.xlsx\", package = \"mocaredd\")  cs <- read_xlsx(path = path, sheet = \"c_stocks\", na = \"NA\") ad <- read_xlsx(path = path, sheet = \"AD_lu_transitions\", na = \"NA\") usr <- read_xlsx(path = path, sheet = \"user_inputs\", na = \"NA\") time <- read_xlsx(path = path, sheet = \"time_periods\", na = \"NA\")  time_clean <- time |> dplyr::mutate(nb_years = year_end - year_start + 1)  sim_trans <- fct_combine_mcs_E(.ad = ad, .cs = cs, .usr = usr)  sim_REF <- fct_combine_mcs_P(   .data = sim_trans,   .time = time_clean,   .period_type = \"REF\",   .ad_annual = usr$ad_annual )  sim_MON <- fct_combine_mcs_P(   .data = sim_trans,   .time = time_clean,   .period_type = \"MON\",   .ad_annual = usr$ad_annual )  ## !!! SIM MON and ER to be done"},{"path":"https://openforis.github.io/mocaredd/reference/fct_combine_mcs_P.html","id":null,"dir":"Reference","previous_headings":"","what":"Combine MCS of emissions to a defined time period — fct_combine_mcs_P","title":"Combine MCS of emissions to a defined time period — fct_combine_mcs_P","text":"Depending period defined data annualized , calculate Emission Level reference monitoring period simulation.","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_combine_mcs_P.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Combine MCS of emissions to a defined time period — fct_combine_mcs_P","text":"","code":"fct_combine_mcs_P(.data, .time, .period_type, .ad_annual)"},{"path":"https://openforis.github.io/mocaredd/reference/fct_combine_mcs_P.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Combine MCS of emissions to a defined time period — fct_combine_mcs_P","text":".data data frame containing simulations .time 'time' table tool input file (see template) .period_type \"reference\" \"monitoring\" .ad_annual TRUE FALSE, activity data annualized .","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_combine_mcs_P.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Combine MCS of emissions to a defined time period — fct_combine_mcs_P","text":"tibble simulations final estimate per type period.","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_combine_mcs_P.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Combine MCS of emissions to a defined time period — fct_combine_mcs_P","text":"","code":"library(readxl) library(dplyr) library(mocaredd)  path <- system.file(\"extdata/example1-4pools.xlsx\", package = \"mocaredd\")  cs <- read_xlsx(path = path, sheet = \"c_stocks\", na = \"NA\") ad <- read_xlsx(path = path, sheet = \"AD_lu_transitions\", na = \"NA\") usr <- read_xlsx(path = path, sheet = \"user_inputs\", na = \"NA\") time <- read_xlsx(path = path, sheet = \"time_periods\", na = \"NA\")  ad_clean <- ad |> dplyr::filter(!is.na(trans_area) | !is.na(trans_pdf_a)) cs_clean <- cs |> dplyr::filter(!is.na(c_value) | !is.na(c_pdf_a)) time_clean <- time |> dplyr::mutate(nb_years = year_end - year_start + 1)  sim_trans <- fct_combine_mcs_E(.ad = ad_clean, .cs = cs_clean, .usr = usr)  sim_FREL <- fct_combine_mcs_P(   .data = sim_trans,   .time = time_clean,   .period_type = \"REF\",   .ad_annual = usr$ad_annual )  hist(sim_FREL$E)  round(median(sim_FREL$E)) #> [1] 4913572"},{"path":"https://openforis.github.io/mocaredd/reference/fct_combine_mcs_cstock.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate and propagate Monte Carlo Simulations based on a template input file. — fct_combine_mcs_cstock","title":"Generate and propagate Monte Carlo Simulations based on a template input file. — fct_combine_mcs_cstock","text":"TBD","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_combine_mcs_cstock.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate and propagate Monte Carlo Simulations based on a template input file. — fct_combine_mcs_cstock","text":"","code":"fct_combine_mcs_cstock(.ad, .cs, .usr)"},{"path":"https://openforis.github.io/mocaredd/reference/fct_combine_mcs_cstock.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate and propagate Monte Carlo Simulations based on a template input file. — fct_combine_mcs_cstock","text":".ad Activity Data input table shiny app (AD_lu_transitions) .cs Carbon Stock input table shiny app (c_stocks) .usr User inputs' table shiny app (user_inputs). Contains number iterations MCS, carbon fraction needed truncated PDFs used necessary.","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_combine_mcs_cstock.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate and propagate Monte Carlo Simulations based on a template input file. — fct_combine_mcs_cstock","text":"data frame Monte Carlo simulations CO2 emissions land use transition, REDD+ activity emission reductions level.","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_combine_mcs_cstock.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate and propagate Monte Carlo Simulations based on a template input file. — fct_combine_mcs_cstock","text":"","code":"library(mocaredd) library(readxl) library(dplyr)  path <- system.file(\"extdata/example2-with-sims.xlsx\", package = \"mocaredd\")  cs <- read_xlsx(path = path, sheet = \"c_stocks\", na = \"NA\") ad <- read_xlsx(path = path, sheet = \"AD_lu_transitions\", na = \"NA\") usr <- read_xlsx(path = path, sheet = \"user_inputs\", na = \"NA\")  res <- fct_combine_mcs_cstock(.ad = ad, .cs = cs, .usr = usr) res |> filter(sim_no == 1) #> # A tibble: 5 × 11 #>   sim_no period lu_id    AGB     RS   ALL     CF c_form         c_stock DG_ratio #>    <int> <chr>  <chr>  <dbl>  <dbl> <dbl>  <dbl> <chr>            <dbl>    <dbl> #> 1      1 ALL    EV      120.  0.299    NA  0.472 (AGB + AGB * …    73.7   NA     #> 2      1 ALL    M       206.  0.374    NA  0.472 (AGB + AGB * …   133.    NA     #> 3      1 ALL    Crop     NA  NA         0  0.472 ALL                0     NA     #> 4      1 ALL    EV_deg   NA  NA        NA NA     DG_ratio * (c…    64.8    0.879 #> 5      1 ALL    M_deg    NA  NA        NA NA     DG_ratio * (c…    80.7    0.605 #> # ℹ 1 more variable: c_stock_before <dbl>"},{"path":"https://openforis.github.io/mocaredd/reference/fct_forestplot.html","id":null,"dir":"Reference","previous_headings":"","what":"Make a forest plot to show Monte Carlo simulation results — fct_forestplot","title":"Make a forest plot to show Monte Carlo simulation results — fct_forestplot","text":"Produce gt::gt() table median confidence interval Monte Carlo simulations category level analysis (land use transition, REDD+ activity, time period) forest plot showing median CI together.","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_forestplot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Make a forest plot to show Monte Carlo simulation results — fct_forestplot","text":"","code":"fct_forestplot(   .data,   .id,   .value_ari = NULL,   .value,   .uperc,   .cilower,   .ciupper,   .id_colname,   .conflevel,   .filename = NA )"},{"path":"https://openforis.github.io/mocaredd/reference/fct_forestplot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make a forest plot to show Monte Carlo simulation results — fct_forestplot","text":".data data frame containing simulation aggregated results .id name ID column data frame .value_ari NULL relevant (cases) column name arithmetic mean Emission emission reductions. .value name value column data frame (.e median simulations) .uperc name percentage uncertainty simulations .cilower name lower end confidence interval .ciupper name higher end confidence interval .id_colname character text ID column names. goes gt::md() gt::cols_label() .conflevel character text specify confidence level used, ex. \"90%\". .filename path save table NA.","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_forestplot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Make a forest plot to show Monte Carlo simulation results — fct_forestplot","text":"character value formula calculating total carbon stock specific land use.","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_histogram.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate histogram to show the simulations at any stage. — fct_histogram","title":"Generate histogram to show the simulations at any stage. — fct_histogram","text":"Takes simulation data fct_combine_mcs_E() fct_combine_mcs_P() aggregated results fct_calc_res() generate histogram showing PDF density, modeled normal distribution, simulations' median confidence interval.","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_histogram.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate histogram to show the simulations at any stage. — fct_histogram","text":"","code":"fct_histogram(.data, .res, .id, .value, .value_type, ...)"},{"path":"https://openforis.github.io/mocaredd/reference/fct_histogram.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate histogram to show the simulations at any stage. — fct_histogram","text":".data data frame simulated data. Output fct_combine_mcs_E() fct_combine_mcs_P(). .res aggregated results simulation. Output fct_calc_res() .id ID column .data .res inputs. .value simulated values column .data. .value_type \"E\" \"ER\" .data represents emissions emission reductions respectively. ... filter query, passed dplyr::filter().","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_histogram.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate histogram to show the simulations at any stage. — fct_histogram","text":"ggplot named list ggplots","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_make_formula.html","id":null,"dir":"Reference","previous_headings":"","what":"Check that the app's the input data has matching land uses and correct carbon pools and associated factors. — fct_make_formula","title":"Check that the app's the input data has matching land uses and correct carbon pools and associated factors. — fct_make_formula","text":"expected input carbon stock table tool contains carbon values different carbon pools coded: - AGB aboveground biomass, - BGB RS (Root--Shoot ratio) belowground biomass, - DW deadwood, - LI litter - SOC soil organic carbon. pools can expressed tons carbon (C), except AGB BGB can also expressed ton dry matter (DM) carbon fraction 'CF' provided.","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_make_formula.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check that the app's the input data has matching land uses and correct carbon pools and associated factors. — fct_make_formula","text":"","code":"fct_make_formula(.c_el, .c_unit)"},{"path":"https://openforis.github.io/mocaredd/reference/fct_make_formula.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check that the app's the input data has matching land uses and correct carbon pools and associated factors. — fct_make_formula","text":".c_el Vector carbon elements, inc. \":: .c_unit \"DM\" \"C\",","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_make_formula.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check that the app's the input data has matching land uses and correct carbon pools and associated factors. — fct_make_formula","text":"character value formula calculating total carbon stock.","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_make_formula.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check that the app's the input data has matching land uses and correct carbon pools and associated factors. — fct_make_formula","text":"","code":"library(mocaredd)  c_el <- c(\"AGB\", \"RS\", \"DW\")  fct_make_formula(.c_el = c_el, .c_unit = \"DM\") #> [1] \"(AGB + AGB * RS) * CF + DW\""},{"path":"https://openforis.github.io/mocaredd/reference/fct_make_mcs.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate Monte Carlo Simulations for a given PDF — fct_make_mcs","title":"Generate Monte Carlo Simulations for a given PDF — fct_make_mcs","text":"TBD","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_make_mcs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate Monte Carlo Simulations for a given PDF — fct_make_mcs","text":"","code":"fct_make_mcs(   .n_iter = 10000,   .pdf,   .mean = NA,   .se = NA,   .params = NULL,   .trunc = FALSE )"},{"path":"https://openforis.github.io/mocaredd/reference/fct_make_mcs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate Monte Carlo Simulations for a given PDF — fct_make_mcs","text":".n_iter Number iterations Monte Carlo simulations .pdf Probability Distribution Function name, supported distributions far: \"normal\", \"beta\". .mean Mean value PDF parameters mean sd .se Standard deviation mean value PDF parameters mean sd .params Vector pf parameters PDFs (IMPLEMENTED YET) .trunc TRUE FALSE, simulations truncated allow values 0 negative values impossible","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_make_mcs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate Monte Carlo Simulations for a given PDF — fct_make_mcs","text":"vector N simulation N, number iterations (.n_iter)","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_make_mcs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate Monte Carlo Simulations for a given PDF — fct_make_mcs","text":"","code":"library(mocaredd)  tt <- fct_make_mcs(.pdf = \"normal\", .mean = 0, .se = 1) hist(tt)"},{"path":"https://openforis.github.io/mocaredd/reference/fct_round.html","id":null,"dir":"Reference","previous_headings":"","what":"Reproduce round function from MS Excel — fct_round","title":"Reproduce round function from MS Excel — fct_round","text":"See: https://stackoverflow.com/questions/59392686/r---define-round-function-like--excel","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_round.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Reproduce round function from MS Excel — fct_round","text":"","code":"fct_round(.num, .digits)"},{"path":"https://openforis.github.io/mocaredd/reference/fct_round.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Reproduce round function from MS Excel — fct_round","text":".num number rounded .digits Number digits passed round()","code":""},{"path":"https://openforis.github.io/mocaredd/reference/fct_round.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Reproduce round function from MS Excel — fct_round","text":"rounded numerical value","code":""},{"path":"https://openforis.github.io/mocaredd/reference/shiny_run_mocaredd.html","id":null,"dir":"Reference","previous_headings":"","what":"Run Monte Carlo for REDD+ uncertainty's shiny app — shiny_run_mocaredd","title":"Run Monte Carlo for REDD+ uncertainty's shiny app — shiny_run_mocaredd","text":"Starts R Shiny application guide users fill context land use changes forest related greenhouse gas emissions removals. Inputs include distribution parameters various distribution app returns error propagation sensitivity analysis overall uncertainty GHG estimates.","code":""},{"path":"https://openforis.github.io/mocaredd/reference/shiny_run_mocaredd.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run Monte Carlo for REDD+ uncertainty's shiny app — shiny_run_mocaredd","text":"","code":"shiny_run_mocaredd(...)"},{"path":"https://openforis.github.io/mocaredd/reference/shiny_run_mocaredd.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run Monte Carlo for REDD+ uncertainty's shiny app — shiny_run_mocaredd","text":"... arguments pass shinyApp","code":""},{"path":"https://openforis.github.io/mocaredd/reference/shiny_run_mocaredd.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Run Monte Carlo for REDD+ uncertainty's shiny app — shiny_run_mocaredd","text":"","code":"if (interactive()) {  shiny_run_mocaredd()  }"}]
