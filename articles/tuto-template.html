<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Guideline for building {mocaredd} workbook • mocaredd</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="tuto-template_files/libs/quarto-html/popper.min.js"></script><script src="tuto-template_files/libs/quarto-html/tippy.umd.min.js"></script><link href="tuto-template_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="tuto-template_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Guideline for building {mocaredd} workbook">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mocaredd</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/app-features.html">Application workflow and features development</a></li>
    <li><a class="dropdown-item" href="../articles/tuto-template.html">Guideline for building {mocaredd} workbook</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/openforis/mocaredd/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Guideline for building {mocaredd} workbook</h1>




      <small class="dont-index">Source: <a href="https://github.com/openforis/mocaredd/blob/main/vignettes/articles/tuto-template.qmd" class="external-link"><code>vignettes/articles/tuto-template.qmd</code></a></small>
      <div class="d-none name"><code></code></div>
    </div>






    <section class="section level2"><h2 class="unnumbered" id="context">Context<a class="anchor" aria-label="anchor" href="#context"></a>
</h2>
<p>In the context of greenhouse gas emission reductions from the forestry sector and REDD+, many countries and jurisdictions’ approach to uncertainty around estimates has focused on large spreadsheet tables that are near-impossible to navigate for anyone but their developers, reducing transparency and effectiveness of verification.</p>
<p>Simplifying simulation-based uncertainty analysis of REDD+ greenhouse gas emission reductions may not be possible or desirable. Over-simplification could result in uncontrolled bias or misrepresent the actual uncertainty around volumes of emission reductions.</p>
<p>The {mocaredd} tool aims at solving two critical issues with over-complicated spreadsheets-based calculations:</p>
<ol type="1">
<li>Split the information into several tables with keys to merge data for calculations. Inspired for database management systems for their efficiency and simplification of data structure.</li>
<li>Process the simulations with a statistical language rather that spreadsheet tool, again for efficiency purpose. The authors also believe that once the carbon accounting calculation chain is well understood by parties, adding the simulations doesn’t need to be visually highlighted, and are safer run programmatically than on spreadsheets.</li>
</ol>
<p>To do so, {mocaredd} is built as a R package that provides calculation functions and a XLSX workbook that contain the initial data in a structured and easy to navigate way.</p>
<p>This guideline provides instructions on how to fill in the template workbook to ensure all matrices of land use change are reported, with all their associated carbon elements, and for all the reported time periods.</p>
</section><section class="section level2" data-number="1"><h2 data-number="1" id="overview-of-the-template">
<span class="header-section-number">1</span> Overview of the template<a class="anchor" aria-label="anchor" href="#overview-of-the-template"></a>
</h2>
<p>The template is built around four tables to encompass all the information necessary to:</p>
<ol type="1">
<li>re-construct the arithmetic means (not based on simulations) of all emissions and removals and emission reductions (ERs).</li>
<li>run simulations for all the input variables of areas and carbon elements,</li>
<li>Get simulation-based emission reductions with their associated uncertainties.</li>
<li>Run sensitivity analysis to highlight the main contributors to the ERs uncertainty.</li>
</ol>
<p>These four tables are designed to describe separately:</p>
<ol type="1">
<li>User inputs to bring flexibility to the calculation algorithm. For example are the land use change expressed in hectares per year or in hectares, or are the carbon stock expressed in tons of dry matter or tons of carbon.</li>
<li>Time periods for the different datasets used in the calculations and with REDD+ period do they belong to, reference or monitoring.</li>
<li>Areas of land use change, for each time period and each combination of land use, what is the area and it’s standard error.</li>
<li>Carbon elements, combining carbon pools and other carbon related elements such as carbon fraction, or degradation ratios if expressed as a percentage of their intact land use.</li>
</ol>
<p>Detailed information for each table is presented in the following sections.</p>
</section><section class="section level2" data-number="2"><h2 data-number="2" id="user-inputs">
<span class="header-section-number">2</span> User inputs<a class="anchor" aria-label="anchor" href="#user-inputs"></a>
</h2>
<p>This table contains a few parameters to allow the tool to handle as many configurations as possible. This is were users specify the number of simulation iterations, if there is a random seed to reproduce the same numbers and options regarding degradation, units and rounding digits.</p>
<table class="table caption-top">
<colgroup>
<col style="width: 10%">
<col style="width: 20%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 50%">
</colgroup>
<thead><tr class="header">
<th>Col. name</th>
<th>Label</th>
<th>Type</th>
<th>Example</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>trunc_pdf</td>
<td>use truncated PDFs?</td>
<td>TRUE/FALSE</td>
<td>FALSE</td>
<td>Specify if truncated PDFs should be used or not.</td>
</tr>
<tr class="even">
<td>n_iter</td>
<td>Number of iterations</td>
<td>integer</td>
<td>10000</td>
<td>Specify the number of simulations to run for each PDF.</td>
</tr>
<tr class="odd">
<td>ran_seed</td>
<td>Random seed</td>
<td>integer or NULL</td>
<td>31</td>
<td>If NULL, the tool generates a random seed each time. Set a seed number to fix the random number and make the analysis reproducible.</td>
</tr>
<tr class="even">
<td>dg_ext</td>
<td>Degradation extension</td>
<td>text</td>
<td>“_deg”</td>
<td>Suffix used to differentiate degraded and intact versions of the same land use. Required if degradation is a carbon ratio.</td>
</tr>
<tr class="odd">
<td>dg_pool</td>
<td>Degradation pools</td>
<td>text, comma separated</td>
<td>AGB, BGB</td>
<td>List the pools affected by degradation (experimental, should always be AGB, BGB, DW)</td>
</tr>
<tr class="even">
<td>ad_annual</td>
<td>Is AD annual</td>
<td>TRUE/FALSE</td>
<td>TRUE</td>
<td>Specify if the Activity Data is reported in hectares (ha) or ha/year</td>
</tr>
<tr class="odd">
<td>conf_level</td>
<td>Confidence level <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>α</mi><annotation encoding="application/x-tex">\alpha</annotation></semantics></math>
</td>
<td>numeric <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="postfix">]</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy="false" form="prefix">[</mo></mrow><annotation encoding="application/x-tex">]0,1[</annotation></semantics></math>
</td>
<td>0.9</td>
<td>Confidence level of the uncertainty. The quantiles representing the upper ad lower bound of the confidence interval.</td>
</tr>
<tr class="even">
<td>round_digits</td>
<td>Rounding number of digits</td>
<td>integer</td>
<td>3</td>
<td>Number of digits to round calculations.</td>
</tr>
</tbody>
</table></section><section class="section level2" data-number="3"><h2 data-number="3" id="time-periods">
<span class="header-section-number">3</span> Time periods<a class="anchor" aria-label="anchor" href="#time-periods"></a>
</h2>
<p>This table is used to specify the time periods of the different datasets used for activity data and emission factors. The reference and monitoring periods can be build for several time periods. For example:</p>
<ul>
<li><p>T1: 2006-2008, Reference Period,</p></li>
<li><p>T2: 2009-2010, Reference Period,</p></li>
<li><p>T3: 2011, Monitoring Period 1</p></li>
<li><p>T4: 2012, Monitoring Period 2</p></li>
<li><p>T5: 2013, Monitoring Period 2.</p></li>
</ul>
<p>In this case, the reference period’s baseline emission level is constructed from 2 time periods T1 and T2, and there are 2 monitoring periods, one build from T3 for one year, and one build from T4 adn T5 for two years.</p>
<p>To allow the script to adjust to different scenario, the template requires a time period ID, the start and end years and a reference of monitoring code (REF is unique, but MON can be subdivided into MON1, MON2, etc.).</p>
<table class="table caption-top">
<colgroup>
<col style="width: 10%">
<col style="width: 20%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 50%">
</colgroup>
<thead><tr class="header">
<th>Col. name</th>
<th>Label</th>
<th>Type</th>
<th>Example</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>period_no</td>
<td>Time period ID</td>
<td>text</td>
<td>T1</td>
<td>ID of the time period</td>
</tr>
<tr class="even">
<td>year_start</td>
<td>Start year</td>
<td>integer</td>
<td>2006</td>
<td>What is the start year of the time period</td>
</tr>
<tr class="odd">
<td>year_end</td>
<td>End year</td>
<td>integer</td>
<td>2010</td>
<td>What is the end year of the time period</td>
</tr>
<tr class="even">
<td>period_type</td>
<td>period type ID</td>
<td>text</td>
<td>REF</td>
<td>Is the time period a reference period (REF) or monitoring (MON). And is it a subdivision of the monitoring period (MON1, MON2, etc.)</td>
</tr>
</tbody>
</table>
<p>NOTE: In case a time period doesn’t start for the beginning of the calendar year, adjust the year to match the duration. For example a time period of 1 year between 1st June 2005 to 31 May 2006 would have a start and end year of 2005 to be considered a one year period for the tool.</p>
</section><section class="section level2" data-number="4"><h2 data-number="4" id="land-use-change-areas">
<span class="header-section-number">4</span> Land use change areas<a class="anchor" aria-label="anchor" href="#land-use-change-areas"></a>
</h2>
</section><section class="section level2" data-number="5"><h2 data-number="5" id="carbon-elements">
<span class="header-section-number">5</span> Carbon elements<a class="anchor" aria-label="anchor" href="#carbon-elements"></a>
</h2>
</section><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config);
    }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script></main>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gael Sola, Javier Garcia Perez.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.9000.</p>
</div>

    </footer>
</div>





  </body>
</html>
